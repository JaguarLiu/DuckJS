(function(d){d([],function(){function b(){this.promises=[];this._promises=[];this._then=function(){}}b.prototype.addPromise=function(b){this.promises.push(b);this._promises.push(b)};b.prototype.resolve=function(b,d){for(var e=this.promises,c=0,h=e.length;c<h;c++)if(e[c]===b){e.splice(c,1);break}d&&(this._promises[d]=b);if(!this.promises.length)this._then.apply(null,[this._promises]),this._promises=[]};b.prototype.then=function(b){this._then=b};return b})})(typeof define!="undefined"?define:function(d,
b){this.Future=b()});(function(d){d(["./future"],function(b){var b=b||window.Future,d="MozAppearance"in document.documentElement.style,k="webkitAppearance"in document.documentElement.style,e=function(c,b,a){if(c)if(c.resolve)c.resolve(b,a);else if(typeof c==="function")c.call(null,b);else if(c.innerHTML)c.innerHTML=b.responseText};return{load:function(c){var h=new b,a=["css","content","script"],g,f,d=a.length,e,i,j;for(g=0;g<d;g++)if(f=a[g],i=c[f])if(j="load"+f.charAt(0).toUpperCase()+f.slice(1),typeof i==="string")h.addPromise(this[j].call(this,
i,h));else if(i.length)for(f=0,e=i.length;f<e;f++)h.addPromise(this[j].call(this,i[f],h));h.then(function(a){if(a.content&&c.contentAppend)c.contentAppend.innerHTML=a.content.responseText;c.callback&&c.callback.apply(null,[c,a])})},loadContent:function(c,b){var a=new XMLHttpRequest;a.onreadystatechange=function(){this.readyState===4&&(this.status>=200&&this.status<300||this.status===304)&&e(b,this,"content")};a.open("GET",c,true);a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.send();return a},
loadCss:function(c,b){var a=document.createElement("link");a.rel="stylesheet";a.type="text/css";a.href=c;if(!k&&!d)a.onload=function(){e(b,a)};else{var g=false,f=function(a){window.setTimeout(function(){if(!g)try{a.sheet.cssRules.length?(g=true,e(b,a)):f(a)}catch(c){c.code===1E3||c.message==="security"||c.message==="denied"?(g=true,e(b,a)):f(a)}},0)};f(a)}document.getElementsByTagName("head")[0].appendChild(a);return a},loadScript:function(c,b){var a=document.createElement("script");a.type="text/javascript";
a.async=true;a.src=c.match(/\.js$/)?c:c+".js";a.onreadystatechange=a.onload=function(){if(!a.readyState||a.readyState==="loaded"||a.readyState==="complete")e(b,a),a.onload=a.onreadystatechange=null};var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(a,d);return a}}})})(typeof define!="undefined"?define:function(d,b){this.Duck=b()});
